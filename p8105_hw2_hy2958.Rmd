---
title: "p8105_hw2_hy2958"
output: github_document
---

```{r setup}
library(tidyverse)
library(readxl)
```

problem 1.1

```{r}
pols = 
  read_csv("./data/fivethirtyeight_datasets/pols-month.csv") %>% 
  janitor::clean_names() %>% 
  separate(mon, into = c("year", "month", "day"), sep='-', convert = TRUE)  %>% 
  mutate (month = case_when(
    month == 1 ~ "January",
    month == 2 ~ "February",
    month == 3 ~ "March",
    month == 4 ~ "April",
    month == 5 ~ "May",
    month == 6 ~ "June",
    month == 7 ~ "July",
    month == 8 ~ "August",
    month == 9 ~ "September",
    month == 10 ~ "October",
    month == 11 ~ "November",
    month == 12 ~ "December")) %>% 
  mutate (president = case_when (
    prez_gop == 1 ~ "republican",
    prez_dem == 1 ~ "democratic")) %>% 
  select (-prez_gop, -prez_dem, -day)
  
```
problem 1.2

```{r}
snp = 
  read_csv("./data/fivethirtyeight_datasets/snp.csv") %>% 
  janitor::clean_names() %>% 
  separate(date, into = c("month", "day", "year"), sep='/', convert = TRUE)  %>% 
  mutate (year=year+2000) %>%
  mutate (year=case_when (year>2025 ~ year-100, year<=2025 ~ year)) %>%
  select (-day) %>% 
  mutate (month = case_when(
    month == 1 ~ "January",
    month == 2 ~ "February",
    month == 3 ~ "March",
    month == 4 ~ "April",
    month == 5 ~ "May",
    month == 6 ~ "June",
    month == 7 ~ "July",
    month == 8 ~ "August",
    month == 9 ~ "September",
    month == 10 ~ "October",
    month == 11 ~ "November",
    month == 12 ~ "December")) %>% 
  relocate(year)

```

problem 1.3

```{r}
unemployment = 
  read_csv("./data/fivethirtyeight_datasets/unemployment.csv") %>% 
  janitor::clean_names() %>%
  pivot_longer(
    jan:dec,
    names_to = "month", 
    values_to = "unemployment_pec") %>% 
    mutate (month = case_when(
    month == 'jan' ~ "January",
    month == 'feb' ~ "February",
    month == 'mar' ~ "March",
    month == 'apr' ~ "April",
    month == 'may' ~ "May",
    month == 'jun' ~ "June",
    month == 'jul' ~ "July",
    month == 'aug' ~ "August",
    month == 'sep' ~ "September",
    month == 'oct' ~ "October",
    month == 'nov' ~ "November",
    month == 'dec' ~ "December"))
```
merge

```{r}
data=left_join (pols, snp, by = c ("year", "month"))
data_final=left_join (data, unemployment,  by = c ("year", "month"))
```

The data pols contains the variables related to the number of national politicians who are democratic or republican at given time from 1947 to 2015. It contains time, the number of republican senators, representatives and governors and democratic senators, representatives and governors. It also include whether the presidents are democratic or republican at the specific time.

The data snp include time from 1950 to 2015 and Standard & Poorâ€™s stock market index (S&P) which often used as a representative measure of stock market as a whole. The index range from 17.05 to 2107.39 with the mean of 474.89

```{r}
summary(snp)
```


The data unemployment contains the time and rate of unemployment in the specific month from 1948-2015 which also indicates the economic status. The unemployment rate range from 2.5 to 10.8 with mean of 5.83

```{r}
summary(unemployment)
```


The result data (822 observations) include the status of political party from 1947 to 2015 and the economic status each month such as unemployment rate, stock market index which can be used to discover the relation between political party and economic status.


Problem 2


```{r}
mrtrashweel = read_excel("./data/Trash.xlsx", na = c("", "NA", "N/A"), sheet = 1, skip = 1) %>% 
  janitor::clean_names() %>%
  filter(!is.na(dumpster)) %>%
  mutate(
    sports_balls = as.integer(round(sports_balls))
  ) %>% 
 select (-x15,-x16) %>%
 mutate (trashweel="MrTrashweel")  %>%
  relocate(year, month, date) %>%
  mutate(year = as.integer(year))

```

```{r}
ProfessorTrashWheel = read_excel("./data/Trash.xlsx", na = c("", "NA", "N/A"), sheet = 2, skip = 1) %>% 
  janitor::clean_names() %>%
  filter(!is.na(dumpster)) %>%
  mutate (trashweel="ProfessorTrashWheel") %>%
  relocate(year, month, date)  %>%
  mutate(year = as.integer(year))

sum_weight <- ProfessorTrashWheel %>% 
  summarise(total = sum(weight_tons))
```

```{r}
Gwynnda = read_excel("./data/Trash.xlsx", na = c("", "NA", "N/A"), sheet = 4, skip = 1) %>% 
  janitor::clean_names() %>%
  filter(!is.na(dumpster)) %>%
  mutate (trashweel="Gwynnda") %>%
  relocate(year, month, date) %>%
  mutate(year = as.integer(year)) 
  
sum_cigarette <- Gwynnda %>%
  filter(year == 2022, month=="June") %>%
  summarise(total = sum(cigarette_butts))
```

merge three sheets

```{r}
trashtidy = 
  bind_rows(mrtrashweel, ProfessorTrashWheel, Gwynnda) %>% 
  janitor::clean_names() %>% 
  relocate(trashweel, dumpster)
```

The resulting datasheet include 1188 observations, include the "trashwheel" and "dumpster" to specify each dump, time variables such as "year", "month" and "date" and variables relate to the trash such as "weight_tons", "volume_cubic_yards" and the category such as plastic bottles, cigarette.

The total weight of trash collected by Professor Trash Wheel is 282.26 tons. The total cigarette butts collected by Gwynnda in June of 2022 is 18120.

